title: $:/core/ui/Actions/new-journal
tags: $:/tags/Actions
description: create a new journal tiddler

\whitespace trim
\define get-tags() $(textFieldTags)$ $(tagsFieldTags)$
\define editJournal()
	<$reveal type="nomatch" state=<<journalTitle>> text="">
		<$action-sendmessage $message="tm-edit-tiddler" $param=<<journalTitle>> />
	</$reveal>
\end
\define createJournal(field:text)
	<$reveal type="match" stateTitle=<<journalTitle>> stateField="$field$" text="">
		<$action-sendmessage $message="tm-new-tiddler" title=<<journalTitle>> tags=<<get-tags>> text=<<journalText>>/>
	</$reveal>
\end
<$vars journalTitleTemplate={{$:/config/NewJournal/Title}} textFieldTags={{$:/config/NewJournal/Tags}} tagsFieldTags={{$:/config/NewJournal/Tags!!tags}} journalText={{$:/config/NewJournal/Text}}>
	<$wikify name="journalTitle" text="""<$macrocall $name="now" format=<<journalTitleTemplate>>/>""">
		<$reveal type="match" state="$:/config/NewJournal/Navigate" text="yes">
			<$action-navigate $to=<<journalTitle>>/>
			<<createJournal>>
		</$reveal>
		<$reveal type="nomatch" state="$:/config/NewJournal/Navigate" text="yes">
			<<editJournal>>
			<<createJournal>>
		</$reveal>
	</$wikify>
</$vars>
